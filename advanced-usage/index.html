<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-advanced-usage" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Advanced usage | S3GW Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.s3gw.tech/img/s3gw-tech-social-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.s3gw.tech/img/s3gw-tech-social-card.png"><meta data-rh="true" property="og:url" content="https://docs.s3gw.tech/advanced-usage"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Advanced usage | S3GW Documentation"><meta data-rh="true" name="description" content="The processes and steps described in this page should not be applicable to the"><meta data-rh="true" property="og:description" content="The processes and steps described in this page should not be applicable to the"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.s3gw.tech/advanced-usage"><link data-rh="true" rel="alternate" href="https://docs.s3gw.tech/advanced-usage" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.s3gw.tech/advanced-usage" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d171a0d7.css">
<script src="/assets/js/runtime~main.db4e1a95.js" defer="defer"></script>
<script src="/assets/js/main.dc6c73a3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/s3gw-tech-logo-200x200.png" alt="s3gw logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/s3gw-tech-logo-200x200.png" alt="s3gw logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">S3GW</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a><a class="navbar__item navbar__link" sidebarid="decisions" href="/decisions">Decisions</a><a class="navbar__item navbar__link" sidebarid="ideas" href="/ideas">Ideas</a></div><div class="navbar__items navbar__items--right"><a href="https://s3gw.tech" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/s3gw-tech/s3gw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/orgs/s3gw-tech/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome to the s3gw project</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/quickstart">Installing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/advanced-usage">Usage</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/advanced-usage">Advanced usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/metrics">metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/troubleshoot-s3gw">Troubleshooting the s3gw</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/s3gw-repos">Development</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/roadmap">roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/s3-compatibility-table">S3 API compatibility</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Usage</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Advanced usage</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Advanced usage</h1>
<p>The processes and steps described in this page should not be applicable to the
vast majority of s3gw deployments. However, depending on circumstance, one might
need to perform some of these for testing or debugging.</p>
<p>The following sections rely on <code>podman</code> for examples. Using <code>docker</code> instead
should work in the same way, although option names may need to be adjusted on
occasion.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-container">Running the container<a href="#running-the-container" class="hash-link" aria-label="Direct link to Running the container" title="Direct link to Running the container">​</a></h2>
<p>One might need to run the container standalone, in which case it&#x27;s important to
understand how to properly configure it. Running the container with <code>--help</code>
will provide some insight.</p>
<p><code>podman run -it quay.io/s3gw/s3gw:latest --help</code></p>
<p>Which should result in something like the following, minus eventual changes not
reflected in this example:</p>
<p>usage: /s3gw/bin/entrypoint.sh [options... -- args]</p>
<p>options:
--help                Shows this message.
--id ID               Specifies a custom instance ID (default: s3gw).
--cert FILE KEY       Specifies SSL certificate. Expects a .crt as first
argument, and a .key as second argument.
--dns-name VALUE      For vhost style buckets, VALUE should be the DNS domain
to be used.
--debug LEVEL         Runs with debug. Levels available: &quot;high&quot;, &quot;medium&quot;,
&quot;low&quot;, &quot;none&quot; (default: none).
--no-telemetry        Disable telemetry.
--telemetry-url URL   Specifies telemetry URL.
--with-status         Enables status frontend at port 9090.</p>
<p>args:
Any option supported by RADOS Gateway. For advanced use only.</p>
<p>env variables:
S3GW_ID           Specifies a custom instance ID.
S3GW_DNS_NAME     Specifies a DNS domain to be used for vhost style buckets.
S3GW_DEBUG        Specifies the debug level to be used.
S3GW_CERT_FILE    Specifies the SSL certificate file.
S3GW_CERT_KEY     Specifies the SSL certificate key file.</p>
<p>Keep in mind that to access the service, one needs to expose the required ports.
For s3gw these are port 7480 for non-SSL access, and port 7481 for SSL access.
This can be achieved with:</p>
<p><code>podman run -it -p 7480:7480 quay.io/s3gw/s3gw:latest</code></p>
<p>In the following sections, we will be describing some of the available options.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-vhost-style-buckets">Using vhost style buckets<a href="#using-vhost-style-buckets" class="hash-link" aria-label="Direct link to Using vhost style buckets" title="Direct link to Using vhost style buckets">​</a></h3>
<p>S3 supports two styles of bucket access: path and vhost. The former considers
the buckets will be part of the address path, like in <code>my.domain.tld/my-bucket/</code>,
whereas the latter assumes the bucket will be part of the vhost,
<code>my-bucket.my.domain.tld</code>.</p>
<p>By default, s3gw runs with path style buckets. One can enable vhost style
buckets by providing the DNS domain name to be used for the service. For
example,</p>
<p>podman run -it -p 7480:7480 <br>
<!-- -->quay.io/s3gw/s3gw<!-- -->:latest<!-- --> <br>
<!-- -->--dns-name my.domain.tld</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="specifying-certificates">Specifying certificates<a href="#specifying-certificates" class="hash-link" aria-label="Direct link to Specifying certificates" title="Direct link to Specifying certificates">​</a></h3>
<p>s3gw supports running with SSL, but will require a certificate to be provided.
The location of this certificate must be local to the container namespace, and
thus should be bind mounted into the container.</p>
<p>podman run -it -p 7481:7481 <br>
<!-- -->-v ./my-cert.crt:/data/my-cert.crt <br>
<!-- -->-v ./my-cert.key:/data/my-cert.key <br>
<!-- -->quay.io/s3gw/s3gw<!-- -->:latest<!-- --> <br>
<!-- -->--cert /data/my-cert.crt /data/my-cert.key</p>
<p>The s3gw service should now be available on the host&#x27;s port 7481 with SSL
enabled.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="debugging-output">Debugging output<a href="#debugging-output" class="hash-link" aria-label="Direct link to Debugging output" title="Direct link to Debugging output">​</a></h3>
<p>s3gw supports four different log levels: <code>none</code>, <code>low</code>, <code>medium</code>, and <code>high</code>. By
default, s3gw runs with <code>none</code>.</p>
<p>The vast majority of deployments will only require <code>none</code> or <code>low</code>, for as long
as they are behaving nicely. In case of misbehavior, it is reasonable to look
towards the logs for indication of what the problem might be. In this case, the
typical deployment will rely on <code>medium</code>. Only in very exceptional situations
will a <code>high</code> be useful. Keep in mind that at a <code>high</code> debug level, the system
will be put under a lot of strain from the amount of outputted messages, and the
value of additional verbosity may not be significant.</p>
<p>Running with debug only requires specifying the <code>--debug LEVEL</code> argument to the
container, such as</p>
<p>podman run -it -p 7480:7480 <br>
<!-- -->quay.io/s3gw/s3gw<!-- -->:latest<!-- --> <br>
<!-- -->--debug medium</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="environment-variables">Environment variables<a href="#environment-variables" class="hash-link" aria-label="Direct link to Environment variables" title="Direct link to Environment variables">​</a></h3>
<p>The available environment variables reflect the arguments accepted by the
container. These can be provided to the container using the <code>--env VAR=VALUE</code>
argument to <code>podman run</code>. For example,</p>
<p>podman run -it -p 7480:7480 <br>
<!-- -->--env S3GW_DEBUG=medium <br>
<!-- -->quay.io/s3gw/s3gw<!-- -->:latest</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional-arguments">Additional arguments<a href="#additional-arguments" class="hash-link" aria-label="Direct link to Additional arguments" title="Direct link to Additional arguments">​</a></h3>
<p>The container accepts additional arguments, that will be passed directly to the
underlying RADOS Gateway binary. These should be used only if one knows what
they are doing. To obtain a small subset of the option supported, running with
<code>-- --help</code> will provide some information. Please note that not all the options
provided in this help message will be applicable.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/s3gw-with-k8s"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">s3gw-with-k8s</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/metrics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">metrics</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#running-the-container" class="table-of-contents__link toc-highlight">Running the container</a><ul><li><a href="#using-vhost-style-buckets" class="table-of-contents__link toc-highlight">Using vhost style buckets</a></li><li><a href="#specifying-certificates" class="table-of-contents__link toc-highlight">Specifying certificates</a></li><li><a href="#debugging-output" class="table-of-contents__link toc-highlight">Debugging output</a></li><li><a href="#environment-variables" class="table-of-contents__link toc-highlight">Environment variables</a></li><li><a href="#additional-arguments" class="table-of-contents__link toc-highlight">Additional arguments</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Quick Links</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/decisions">Decisions</a></li><li class="footer__item"><a class="footer__link-item" href="/ideas">Ideas</a></li><li class="footer__item"><a class="footer__link-item" href="/s3-compatibility-table">S3 Compatibility</a></li></ul></div><div class="col footer__col"><div class="footer__title">S3GW Project</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://s3gw.tech" target="_blank" rel="noopener noreferrer" class="footer__link-item">Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/s3gw-tech/s3gw" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/orgs/s3gw-tech/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://artifacthub.io/packages/helm/s3gw/s3gw" target="_blank" rel="noopener noreferrer" class="footer__link-item">ArtifactHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://quay.io/organization/s3gw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Quay<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 s3gw.tech contributors. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>