"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7433],{3252:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var t=s(4848),r=s(8453);const i={},o="Testing a release",l={id:"0017-release-testing",title:"Testing a release",description:"Context and Problem Statement",source:"@site/../s3gw/docs/decisions/0017-release-testing.md",sourceDirName:".",slug:"/0017-release-testing",permalink:"/decisions/0017-release-testing",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:17,frontMatter:{},sidebar:"decisions",previous:{title:"Release Steps for the s3gw project",permalink:"/decisions/0016-release-steps"},next:{title:"s3gw High Availability model",permalink:"/decisions/0018-s3gw-ha-model"}},a={},c=[{value:"Context and Problem Statement",id:"context-and-problem-statement",level:2},{value:"Note Before",id:"note-before",level:2},{value:"Validate deployment via Helm Chart",id:"validate-deployment-via-helm-chart",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"testing-a-release",children:"Testing a release"}),"\n",(0,t.jsx)(n.h2,{id:"context-and-problem-statement",children:"Context and Problem Statement"}),"\n",(0,t.jsxs)(n.p,{children:["Releasing is an essential process for the ",(0,t.jsx)(n.code,{children:"s3gw"})," project. Given the project is\ncomposed by various sub-projects, that need to be prepared, tested, and\neventually released, the Release Process is not trivial."]}),"\n",(0,t.jsxs)(n.p,{children:["This document defines and agrees on the steps required to test the ",(0,t.jsx)(n.code,{children:"s3gw"}),"\nproject, and results from splitting the ",(0,t.jsx)(n.a,{href:"/decisions/0007-release-process",children:"Release Process ADR"})," in\nthree documents: ",(0,t.jsx)(n.a,{href:"/decisions/0015-release-methodology",children:"Release Methodology"}),",\n",(0,t.jsx)(n.a,{href:"/decisions/0016-release-steps",children:"Release Steps"})," and Release Testing (this document)."]}),"\n",(0,t.jsxs)(n.p,{children:["This document supersedes the ",(0,t.jsx)(n.a,{href:"/decisions/0007-release-process",children:"Release Process ADR"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"note-before",children:"Note Before"}),"\n",(0,t.jsx)(n.p,{children:"This document requires expansion. The whole team is encouraged to enhance this\ndocument with further testing scenarios."}),"\n",(0,t.jsx)(n.h2,{id:"validate-deployment-via-helm-chart",children:"Validate deployment via Helm Chart"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Ensure a Kubernetes distribution with Longhorn and cert-manager installed is available. E.g.,\nfor ",(0,t.jsx)(n.code,{children:"k3s"}),","]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.24.7+k3s1 sh -s - --write-kubeconfig-mode 644\nsudo cp /etc/rancher/k3s/k3s.yaml ~/.kube/config\nsudo chown my-user:users ~/.kube/config\nexport KUBECONFIG=~/.kube/config\n\nkubectl apply -f https://raw.githubusercontent.com/longhorn/longhorn/v1.3.2/deploy/prerequisite/longhorn-iscsi-installation.yaml\nkubectl apply -f https://raw.githubusercontent.com/longhorn/longhorn/v1.3.2/deploy/longhorn.yaml\n\nkubectl create namespace cert-manager\nhelm repo add jetstack https://charts.jetstack.io\nhelm repo update\nhelm install cert-manager --namespace cert-manager jetstack/cert-manager \\\n     --set installCRDs=true \\\n     --set extraArgs[0]=--enable-certificate-owner-ref=true\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Follow the Helm chart installation procedure from the ",(0,t.jsx)(n.code,{children:"s3gw"}),"\n",(0,t.jsx)(n.a,{href:"https://s3gw-docs.readthedocs.io/en/latest/helm-charts/",children:"documentation"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Verify the pods are coming up nicely"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl get pods -n s3gw\n\n> NAME                       READY   STATUS    RESTARTS   AGE\n> s3gw-ui-77b7cdf987-c5lvj   1/1     Running   0          33s\n> s3gw-5659dbb456-a4fcg      1/1     Running   0          33s\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Check whether the ",(0,t.jsx)(n.code,{children:"s3gw-ui"})," is reachable at the address specified in the\n",(0,t.jsx)(n.code,{children:"values.yaml"})," provided during ",(0,t.jsx)(n.code,{children:"helm install"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Check whether the you can perform actions through the UI, like creating\nbuckets, uploading objects, listing buckets, etc."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Check whether the ",(0,t.jsx)(n.code,{children:"s3gw"})," service is reachable, test with ",(0,t.jsx)(n.code,{children:"s3cmd"})," or ",(0,t.jsx)(n.code,{children:"s3"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If at any point there's an indication that something is not working right, or\nyou find a crash, please file an ",(0,t.jsx)(n.a,{href:"https://github.com/aquarist-labs/s3gw/issues/new/choose",children:"issue on GitHub"}),"."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var t=s(6540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);