"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3164],{6349:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var i=t(4848),s=t(8453);const o={},r="s3gw High Availability model",l={id:"0018-s3gw-ha-model",title:"s3gw High Availability model",description:"Context and Problem Statement",source:"@site/../s3gw/docs/decisions/0018-s3gw-ha-model.md",sourceDirName:".",slug:"/0018-s3gw-ha-model",permalink:"/decisions/0018-s3gw-ha-model",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:18,frontMatter:{},sidebar:"decisions",previous:{title:"Testing a release",permalink:"/decisions/0017-release-testing"},next:{title:"Severity Labels",permalink:"/decisions/0019-severity-labels"}},a={},c=[{value:"Context and Problem Statement",id:"context-and-problem-statement",level:2},{value:"Considered Options",id:"considered-options",level:2},{value:"Decision Outcome",id:"decision-outcome",level:2}];function d(e){const n={a:"a",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"s3gw-high-availability-model",children:"s3gw High Availability model"}),"\n",(0,i.jsx)(n.h2,{id:"context-and-problem-statement",children:"Context and Problem Statement"}),"\n",(0,i.jsx)(n.p,{children:"We analyzed some High Availability - HA - concepts applied to the s3gw when used with Longhorn.\nThe final aim of the research is to identify an HA model we can reasonably rely on."}),"\n",(0,i.jsxs)(n.p,{children:["The full and initial HA research document can be found here:\n",(0,i.jsx)(n.a,{href:"../research/ha/RATIONALE",children:"High Availability research"}),".\nYou can find there all the rationales, motivations and the details about the tests performed."]}),"\n",(0,i.jsx)(n.h2,{id:"considered-options",children:"Considered Options"}),"\n",(0,i.jsx)(n.p,{children:"We identified 3 HA models:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Active/Active"})," (multiple s3gw instances concurrently serving the same data)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Active/Warm Standby"})," (multiple s3gw instances, one serving data, others able to take over if active instance fails)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Active/Standby"})," (single s3gw instance, with Kubernetes restarting/redeploying as necessary on failure)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"decision-outcome",children:"Decision Outcome"}),"\n",(0,i.jsxs)(n.p,{children:["The 3 aforementioned models have different performances and different implementation efforts.\nFor our use case, the ",(0,i.jsx)(n.em,{children:"Active/Standby"}),' model built on top of Longhorn actually makes\nthe most sense and brings the "best" HA characteristics relative to implementing a\nmore fully active/distributed solution.']}),"\n",(0,i.jsxs)(n.p,{children:["List of ",(0,i.jsx)(n.em,{children:"desirable"})," characteristics owned by the ",(0,i.jsx)(n.em,{children:"Active/Standby"})," model"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Simplicity"}),"\n",(0,i.jsx)(n.li,{children:"Low implementation effort in respect to the other models"}),"\n",(0,i.jsx)(n.li,{children:"Expected to work mainly with Kubernetes primitives"}),"\n",(0,i.jsx)(n.li,{children:"Compatible with RWO persistent volume semantics"}),"\n",(0,i.jsx)(n.li,{children:"Acceptable restart timings on switch-overs and fail-overs (excluding the non-graceful node failure)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Be aware that the ",(0,i.jsx)(n.a,{href:"../research/ha/RATIONALE#non-graceful-node-failure",children:"non-graceful node failure"}),"\nproblem cannot be entirely solved with the ",(0,i.jsx)(n.em,{children:"Active/Standby"})," model alone.\nRegarding this, we have opened a ",(0,i.jsx)(n.a,{href:"https://github.com/longhorn/longhorn/issues/6803",children:"dedicated issue"}),"\nwithin the Longhorn project."]}),"\n",(0,i.jsxs)(n.p,{children:["For a more comprehensive explanation about this choice, please refer to the original\n",(0,i.jsx)(n.a,{href:"https://github.com/aquarist-labs/s3gw/pull/685",children:"High Availability research"})," pull request."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(6540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);